# TODO

## 待修复
1. **搜索容器左移问题**
   - **现象**：搜索框输入后触发搜索渲染时，搜索容器会略微左移（约5px以内）
   - **触发条件**：清空搜索内容回到主页时，左偏移立即归位（证实了时序问题）
   - **问题源头**：`assets/js/modules/render/device.js` 第105-112行
     ```javascript
     // 如果正在搜索渲染中，跳过位置调整
     if (content && content.classList.contains('search-rendering')) {
         adjustPositionTimeout = null;
         return;  // 这里导致位置调整被阻止
     }
     ```
   - **核心原因**：搜索状态管理和位置调整逻辑的时序不匹配
     * `search.js` 添加 `search-rendering` 类时暂停位置调整
     * 搜索容器失去动态位置校正，产生轻微偏移
     * 清空搜索时类被移除，位置调整重新生效并立即归位
   - **影响因素**：
     * CSS变量 `--search-container-centering-offset` 值丢失
     * DOM结构变化影响 `getBoundingClientRect()` 计算
     * 搜索结果渲染触发布局重排
     * 16ms防抖延迟与搜索渲染时序不同步
   - **解决思路**：
     1. 在搜索渲染完成后强制重新计算位置
     2. 优化 `search-rendering` 状态的管理时机
     3. 改进位置调整函数，特殊处理搜索状态
     4. 确保CSS变量在状态切换时正确维护
   - **设计冲突**：违背了项目规范中'搜索容器作为固定的UI导航元素，位置保持固定'的原则

## 建议
1. 是否要结合UA判断来做响应式处理
2. 搜索结果筛选：文件夹/书签名/URL
3. 考虑是否重新使用oobe这样的加载库
4. 鼠标悬停在搜索结果上显示该 书签/文件夹 的路径
5. 多根目录时考虑展开得到一级文件夹

## 分页系统优化建议
1. 考虑添加"跳转到页面"功能
2. 添加每页显示数量选择器
3. 优化大数据集的分页性能


## 已修复的问题

- [x] 模块化了CSS

- [x] 解决了CSP警告

- [x] 解决字体模糊问题

- [x] 修复gif背景缩放位置问题

- [x] 合并DOM监听器

- [x] 拆分函数为单一职责

- [x] 修复移动端点击后样式丢失问题

- [x] 统一断点系统重构

- [x] 模块化了Render相关js

- [x] 修复若干响应式bug

- [x] 修复多个渲染问题

- [x] 搜索结果分页

- [x] 分页控件响应式设计

- [x] 移动端分页优化

- [x] 分页控件样式统一

- [x] 分页性能优化

- [x] 分页无障碍支持

- [x] 分页滚动行为优化

- [x] 移动端底部边距优化

- [x] 移动端内容区左侧边距调整

- [x] 大量修复
